# Cursor AI Rules for CAD Dashboard Frontend Project

## Project Overview
- **Framework**: React 18+ with Vite
- **Styling**: TailwindCSS with custom components
- **State Management**: React hooks, Zustand stores
- **UI Components**: Custom UI library based on shadcn/ui
- **Validation**: Zod library (user preference)
- **Animation**: Framer Motion
- **Backend**: REST API at configurable IP (see src/config/backend.js)

## Code Style & Conventions

### React Components
- Use functional components with hooks
- Prefer named exports for components
- Use `useCallback` and `useMemo` for optimization
- Define components outside of other components to prevent re-render issues
- Use React.memo for expensive components

### State Management
- Use Zustand stores in `src/stores/` for global state
- Use React hooks for local component state
- Use context for theme, auth, and sidebar state

### Forms & Validation
- **IMPORTANT**: Use Zod library for validation (user preference)
- Form validation schemas in `src/lib/validations.js`
- Custom hook: `useZodForm` for form handling
- Always validate required fields

### Styling
- Use TailwindCSS utility classes
- Dark mode support with `dark:` prefix
- Consistent spacing: `p-4`, `p-6`, `space-y-2`, `gap-4`
- Colors: Primary blue-500/600, gray for neutrals

### Responsiveness (Desktop-First Approach)
- **Default (Desktop)**: Design for desktop screens first (1024px+)
- **max-lg**: Tablets and below (<1024px) - `max-lg:`
- **max-md**: Mobile devices (<768px) - `max-md:`
- **max-sm**: Small mobile (<640px) - `max-sm:`
- **lg**: Desktop (1024px+) - `lg:`
- **xl**: Large Desktop (1280px+) - `xl:`
- **2xl**: Extra Large (1536px+) - `2xl:`

#### Responsive Patterns:
- **Grid Layouts**: `grid-cols-3 md:grid-cols-2 max-md:grid-cols-1`
- **Flex Direction**: `flex-row max-md:flex-col`
- **Hidden Elements**: `block max-md:hidden` or `hidden max-md:block`
- **Text Sizes**: `text-lg md:text-base max-md:text-sm`
- **Padding/Spacing**: `p-8 md:p-6 max-md:p-4`
- **Container Widths**: `w-1/3 md:w-1/2 max-md:w-full`
- **Tables**: Full width on desktop, horizontal scroll on mobile with `max-md:overflow-x-auto`
- **Modals**: Centered on desktop, full screen on mobile with `max-md:w-full max-md:h-full`
- **Forms**: Multi-column on desktop, single column on mobile

### File Organization
```
src/
├── components/       # Reusable UI components
│   ├── ui/          # Base UI components (buttons, inputs, etc.)
│   ├── forms/       # Form components
│   ├── modals/      # Modal dialogs
│   └── ...
├── pages/           # Page components
├── hooks/           # Custom React hooks
├── stores/          # Zustand state stores
├── context/         # React context providers
├── services/        # API services
├── config/          # Configuration files
└── lib/             # Utilities and validations
```

### API Integration
- Backend config in `src/config/backend.js`
- API functions in `src/services/api.js`
- Use async/await for API calls
- Handle loading, error states

### Component Patterns

#### Table Components
- Sticky headers: `sticky top-0 z-10`
- Sticky first column: `sticky left-0 z-20`
- Sortable columns using `sortable-table.jsx`
- Always add `group` class to rows for hover effects
- **Responsive Tables**:
  - Full width on desktop with all columns visible
  - Horizontal scroll on mobile: `max-md:overflow-x-auto`
  - Fixed first column during scroll: `sticky left-0`
  - Minimum column widths to prevent cramping on mobile
  - Consider card view for mobile as alternative with `max-md:hidden` and `max-md:block`
  - Touch-friendly row heights on mobile (min 48px)

#### Form Components
- Mobile number: Support multiple entries (max 5)
- DND Status: Use Switch component (toggle)
- File upload: Compact design with small icons
- Field validation with error messages
- **Responsive Forms**:
  - Three columns on desktop: `grid-cols-3`
  - Two columns on tablet: `md:grid-cols-2`
  - Single column on mobile: `max-md:grid-cols-1`
  - Stack labels above inputs on mobile with `max-md:flex-col`
  - Use appropriate input types for mobile keyboards

#### Modal/Dialog Components
- Use framer-motion for animations
- Close on backdrop click
- Escape key to close
- Loading states for async actions
- **Responsive Modals**:
  - Centered with max-width on desktop: `max-w-4xl`
  - Full screen on mobile: `max-md:w-full max-md:h-full max-md:max-w-full`
  - Scrollable content: `overflow-y-auto max-h-[90vh]`
  - Proper padding: `p-6 max-md:p-4`

### Best Practices
1. **Performance**: Wrap event handlers in `useCallback`
2. **Accessibility**: Use semantic HTML, proper labels, ARIA attributes
3. **Responsive Design**: 
   - Desktop-first approach (design for desktop, adapt for mobile)
   - Test on multiple screen sizes (1920px, 1024px, 768px, 320px)
   - Use responsive images and media queries
   - Ensure touch targets are minimum 44x44px on mobile
   - Test horizontal scrolling on tables for mobile devices
4. **Error Handling**: Always handle API errors gracefully
5. **Loading States**: Show loading indicators for async operations
6. **Dark Mode**: Support both light and dark themes
7. **TypeScript**: Use JSDoc comments for type hints (if not using TS)
8. **Touch Devices**: Ensure all interactive elements work on touch screens

### Common Components Location
- Button: `src/components/ui/button.jsx`
- Input: `src/components/ui/input.jsx`
- Label: `src/components/ui/label.jsx`
- Switch: `src/components/ui/switch.jsx`
- Checkbox: `src/components/ui/checkbox.jsx`
- Badge: `src/components/ui/badge.jsx`
- Card: `src/components/ui/card.jsx`
- Dialog: `src/components/ui/dialog.jsx`
- SearchableDropdown: `src/components/ui/searchable-dropdown.jsx`
- SortableTable: `src/components/ui/sortable-table.jsx`

### Custom Hooks
- `useZodForm`: Form handling with Zod validation
- `useDebounce`: Debounced values
- `useCountries`, `useStates`, `useCities`: Location data
- `useAssetTypes`, `useVendors`, `useManufacturers`: Master data

### Known Issues to Avoid
1. **Input Focus Loss**: Never define components inside other components
2. **Re-render Issues**: Always memoize callbacks passed to child components
3. **Sticky Columns**: Use proper z-index layering (header z-20, body z-10)
4. **Form Performance**: Use `useCallback` for all input handlers

### Network Configuration
- Dev server: `vite.config.js` with `host: true`
- Backend IP: Configurable in `src/config/backend.js`
- Default port: 5173

### When Making Changes
- Check for linter errors after edits
- Test in both light and dark mode
- **Verify responsive behavior**:
  - Test on desktop view (1920px, 1440px) FIRST
  - Test on tablet view (1024px, 768px)
  - Test on mobile view (425px, 375px, 320px)
  - Check horizontal scrolling on tables for mobile
  - Verify touch interactions work on mobile devices
  - Test form inputs adapt properly on smaller screens
- Ensure accessibility (keyboard navigation, screen readers)
- Test API integration with actual backend

### Naming Conventions
- Components: PascalCase (e.g., `AddLeadForm.jsx`)
- Hooks: camelCase with 'use' prefix (e.g., `useZodForm.js`)
- Utils: camelCase (e.g., `formatDate.js`)
- Constants: UPPER_SNAKE_CASE
- CSS classes: kebab-case (Tailwind utilities)

## Priority
- User experience and performance
- Clean, maintainable code
- Consistent styling across the app
- Proper error handling
- Accessibility compliance

